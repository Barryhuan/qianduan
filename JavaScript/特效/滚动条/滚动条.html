<!DOCTYPE html>
<html>
    <head>
        <title>滚动条</title>
        <meta charset="UTF-8">
        <style>
            * {
                padding: 0;
                margin: 0;
            }
            body {
                font-size: 12px;
            }
            #box {
                width: 400px;
                height: 500px;
                border: 1px solid #000;
                margin: 50px auto;
                position: relative;
                overflow: hidden;
            }

            #box .content {
                width: 360px;
                background-color: red; 
                position: absolute;
            }

            #box .scroll {
                width: 40px;
                height: 500px;
                background-color: #CCC;
                position: absolute;
                top: 0;
                right: 0;
            }

            #box .scroll .bar {
                width: 40px;
                position: absolute;
                background-color: orange;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div id="box">
            <div class="content">
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
            </div>
            <div class="scroll">
                <div class="bar"></div>
            </div>
        </div>
        <script>
            var box = document.getElementById('box')
            var content = box.children[0]
            var scroll = box.children[1]
            var bar = scroll.children[0]

            if (content.offsetHeight > box.offsetHeight) {
                // console.log(box.offsetHeight)
                // console.log(content.offsetHeight)
                // console.log(box.offsetHeight)
                bar.style.height = (box.offsetHeight / content.offsetHeight * box.offsetHeight) + 'px'
                
            } else {
                bar.style.height = 0
            }

            bar.onmousedown = function (event) {
                var event = event || window.event
                var pageY = event.pageY || event.clientTop + document.documentElement.scrollTop

                var barY = pageY - box.offsetTop - bar.offsetTop

                document.onmousemove = function (event) {
                    var event = event || window.event
                    var pageY = event.pageY || event.client + document.documentElement.scrollTop
                    
                    var boxY = pageY - box.offsetTop
                    
                    
                    var target = boxY - barY

                    if (target < 0) {
                        target = 0
                    }

                    if (target > box.offsetHeight - bar.offsetHeight) {
                        target = box.offsetHeight - bar.offsetHeight
                    }
                    bar.style.top = target + 'px'
                    window.getSelection ? window.getSelection().removeAllRanges() : document.getSelection.empty()
                    
                    var rate = (content.offsetHeight - box.offsetHeight) / (box.offsetHeight - bar.offsetHeight)
                    content.style.top = -(rate * target) + 'px'
                    console.log(content.style.top)
                }
            }

            bar.onmouseup = function () {
                document.onmousemove = null
            }

            document.documentElement.onmouseup = function () {
                console.log('老子被调用了')
                document.onmousemove = null
                }
        </script>
    </body>
</html>