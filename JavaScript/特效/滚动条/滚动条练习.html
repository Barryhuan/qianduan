<!DOCTYPE html>
<html>
    <head>
        <title>滚动条练习</title>
        <meta charset="UTF-8"> 
        <style>
            * {
                padding: 0;
                margin: 0;
            }
            body {
                font-size: 12px;
            }
            #box {
                width: 400px;
                height: 500px;
                margin: 100px auto;
                /* border: 1px solid #000; */
                position: relative;
                overflow: hidden;
            }

            #box .content {
                position: absolute;
                left: 0;
                width: 370px;
                background-color: red;
            }

            #box .scroll {
                position: absolute;
                right: 0;
                width: 30px;
                height: 500px;
                background-color: #ccc;
            }

            #box .scroll .bar {
                position: absolute;
                top: 0;
                width: 30px;
                cursor: pointer;
                background-color: orange;
            }
        </style>
    </head>
    <body>
        <div id="box">
            <div class="content">
                    我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的老天我的老天老天
                    我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的我的老天我的老天我的老天我的老天老
                    我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老天我的老天我的老天我的我的老天我的老天我的老天我的老天老
            </div>
            <div class="scroll">
                <div class="bar"></div>
            </div>
        </div>
        <script>
            var box = document.getElementById('box')
            var content = box.children[0]
            var scroll = box.children[1]
            var bar = scroll.children[0]

            if (content.offsetHeight > box.offsetHeight) {
                bar.style.height = (box.offsetHeight / content.offsetHeight * box.offsetHeight) + 'PX'
            }

            bar.onmousedown = function (event) {
                var event = event || window.event
                var pageY = event.pageY || event.clientTop + document.documentElement.scrollTop
                console.log('pageY：' + pageY) 
                var barY = pageY - box.offsetTop - bar.offsetTop
                console.log('barY：' + barY) 
                console.log('box.offsetTop：' + box.offsetTop) 
                console.log('bar.offsetTOP：' + bar.offsetTop) 
                document.onmousemove = function (event) {
                    var event = event || window.event
                    var pageY = event.pageY || event.clientTop + document.documentElement.scrollTop
                    var boxY = pageY - box.offsetTop
                    var target = boxY - barY
                    if (target < 0) {
                        target = 0
                    }
                    if (target > box.offsetHeight - bar.offsetHeight) {
                        target = box.offsetHeight - bar.offsetHeight
                    }
                    
                    bar.style.top = target + 'px'
                    console.log(target)

                    var tep = (content.offsetHeight - box.offsetHeight) / (box.offsetHeight - bar.offsetHeight)
                    content.style.top = - (tep * target) + 'px'

                    window.getSelection ? window.getSelection().removeAllRanges() : document.getSelection()
                }
            }

            bar.onmouseup = function () {
                document.onmousemove = null
            }
        </script>
    </body>
</html>